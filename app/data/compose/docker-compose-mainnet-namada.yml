version: "3.8"

services:
  namada:
    restart: unless-stopped
    hostname: namada
    image: cerc/namada:local
    entrypoint: ["sh", "/docker-entrypoint-scripts.d/start-node.sh"]
    volumes:
      - ../config/mainnet-namada/start-node.sh:/docker-entrypoint-scripts.d/start-node.sh
      - namada_data:/root/.local/share/namada
    environment:
      - CHAIN_ID=$CHAIN_ID
      - EXTIP=$EXTIP
    ports:
      - "${P2P_PORT:-26656}:26656" # p2p
      - "${RPC_PORT:-26657}:26657" # http rpc

volumes:
  namada_data:

extra_hosts:
    - "host.docker.internal:host-gateway"
